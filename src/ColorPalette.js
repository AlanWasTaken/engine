'use strict';

var Color = require('./Color');

/**
 * @class Stores multiple palettes in a collection and provides methods for
 *        accessing, adding, and retrieving a random palette from a pre-set
 *        collection.
 * @description
 * @name ColorPalettes
 * @constructor
 */
var ColorPalette = function ColorPalette() {
    this._palette = [];
    var options = Color.flattenArguments(arguments);
    (options.length) ? this.makePalette(options) : this.setRandomPalette();
};

/**
 * Returns the stored palette
 *
 * @method getPalette
 * @returns Palette
 */
ColorPalette.prototype.getPalette = function getPalette() {
    return this._palette;
};

/**
 * Returns the color at a given index within the palette
 *
 * @method getColor
 * @param Index
 * @returns {Color} Color
 */
ColorPalette.prototype.getColor = function getColor(i) {
    return this._palette[i];
};

/**
 * Makes a Color from the given inputs
 *
 * @method makeColor
 * @param Color values in RGB, HSL, Hex, or HSV
 * @returns {Color} Color
 */
ColorPalette.prototype.makeColor = function makeColor() {
    var options = Color.flattenArguments(arguments);
    return new Color(options[0], options[1], options[2]);
};

/**
 * Makes a palette from a given set of Colors
 *
 * @method makePalette
 * @param Color inputs
 * @chainable
 * @returns Palette
 */
ColorPalette.prototype.makePalette = function makePalette() {
    var options = Color.flattenArguments(arguments);
    var palette = [];
    for(var i = 0; i < options.length; i++) {
        var color = this.makeColor(options[i]);
        palette.push(color);
    }
    this._palette = palette;
    return this;
};

/**
 * Sets the color palette from a given set of palettes
 *
 * @method setRandomPalette
 * @returns Color palette
 */
ColorPalette.prototype.setRandomPalette = function setRandomPalette() {
    var index = Math.floor(Math.random() * rawPalettes.length);
    this.makePalette(rawPalettes[Math.floor(index)]);
    return this;
};

/**
 * Returns the lightest color in the color palette
 *
 * @method getLighestColor
 * @returns Lightest color
 */
ColorPalette.prototype.getLighestColor = function() {
    var lightestValue = 0, lightestRef;

    for (var i = 0; i < this._palette.length; i++) {
        var light = this._palette[i].getLightness();
        if (light > lightestValue) {
            lightestRef = this._palette[i];
            lightestValue = light;
        }
    }
    return lightestRef;
};

/**
 * Returns the darkest color in the color palette
 *
 * @method getDarkestColor
 * @returns Darkest color
 */
ColorPalette.prototype.getDarkestColor = function() {
    var darkestValue = 100, darkestRef;

    for (var i = 0; i < this._palette.length; i++) {
        var dark = this._palette[i].getLightness();
        if( dark < darkestValue ) {
            darkestRef = this._palette[i];
            darkestValue = dark;
        }
    }
    return darkestRef;
};

/**
 * Returns the number of colors inside of the palette
 *
 * @method getPaletteCount
 * @returns {Integer} Palette color length
 */
ColorPalette.prototype.getPaletteCount = function getPaletteCount() {
    return this._palette.length;
};

/**
 * A set of defined color palettes
 */
var rawPalettes = [
    [[53,92,125], [108,91,123], [192,108,132], [246,114,128], [248,177,149]],
    [[27,21,33], [181,172,1], [212,30,69], [232,110,28], [236,186,9]],
    [[63,54,42], [231,69,13], [250,157,4], [251,222,3], [254,245,150]],
    [[10,103,137], [10,153,111], [207,6,56], [250,102,50], [254,205,35]],
    [[157,85,105], [192,227,217], [202,55,99], [227,237,195], [235,113,84]],
    [[110,110,110], [145,217,255], [237,255,135], [255,133,167], [255,255,255]],
    [[0,0,0], [25,26,36], [51,44,44], [250,101,87], [255,255,255]],
    [[27,103,107], [81,149,72], [136,196,37], [190,242,2], [234,253,230]],
    [[31,11,12], [48,5,17], [179,84,79], [214,195,150], [231,252,207]],
    [[172,248,248], [223,235,24], [230,95,95], [235,54,24], [235,207,24]],
    [[196,182,109], [213,39,5], [240,211,119], [243,232,228], [247,109,60]],
    [[11,72,107], [59,134,134], [121,189,154], [168,219,168], [207,240,158]],
    [[0,188,209], [118,211,222], [174,232,251], [176,248,255], [254,249,240]],
    [[85,73,57], [112,108,77], [241,230,143], [255,100,100], [255,151,111]],
    [[36,244,161], [178,42,58], [199,244,36], [244,36,182], [249,246,49]],
    [[108,144,134], [169,204,24], [207,73,108], [235,234,188], [252,84,99]],
    [[78,79,75], [130,35,57], [247,62,62], [255,119,61], [255,213,115]],
    [[121,28,49], [145,213,152], [191,178,64], [202,51,68], [237,126,80]],
    [[104,73,83], [127,191,151], [182,219,145], [250,107,41], [253,158,41]],
    [[0,203,231], [0,218,60], [223,21,26], [244,243,40], [253,134,3]],
    [[56,222,231], [232,255,0], [254,62,71], [255,130,0]],
    [[27,32,38], [75,89,107], [153,228,255], [247,79,79], [255,59,59]],
    [[0,0,0], [0,173,239], [236,0,140], [255,242,0]],
    [[47,43,173], [173,43,173], [228,38,146], [247,21,104], [247,219,21]],
    [[101,150,158], [171,20,44], [189,219,222], [205,212,108], [219,217,210]],
    [[97,24,36], [193,47,42], [247,255,238], [254,222,123], [255,101,64]],
    [[118,85,66], [124,231,163], [220,93,110], [255,174,60], [255,229,156]],
    [[63,184,175], [127,199,175], [218,216,167], [255,61,127], [255,158,157]],
    [[217,251,223], [219,255,210], [231,254,235], [234,255,210], [243,255,210]],
    [[0,23,42], [27,139,163], [94,202,214], [178,222,249], [206,254,255]],
    [[225,245,196], [237,229,116], [249,212,35], [252,145,58], [255,78,80]],
    [[7,9,61], [11,16,140], [12,15,102], [14,78,173], [16,127,201]],
    [[5,177,240], [5,232,240], [94,87,230], [230,87,149], [255,5,113]],
    [[48,0,24], [90,61,49], [131,123,71], [173,184,95], [229,237,184]],
    [[111,191,162], [191,184,174], [242,199,119], [242,230,194], [255,255,255]],
    [[22,147,165], [69,181,196], [126,206,202], [160,222,214], [199,237,232]],
    [[8,26,48], [50,64,90], [59,100,128], [155,153,130], [255,134,17]],
    [[74,186,176], [152,33,0], [255,211,0], [255,245,158]],
    [[42,135,50], [49,48,66], [107,85,48], [255,109,36], [255,235,107]],
    [[0,0,0], [25,134,219], [105,172,224], [149,199,24], [184,212,40]],
    [[64,0,20], [127,0,40], [191,0,59], [229,0,71], [255,0,79]],
    [[56,69,59], [78,133,136], [255,70,84], [255,213,106], [255,254,211]],
    [[29,44,143], [57,179,162], [209,146,191], [222,75,107], [252,180,121]],
    [[14,36,48], [232,213,183], [232,213,185], [245,179,73], [252,58,81]],
    [[0,210,255], [222,255,0], [255,0,168], [255,66,0]],
    [[21,99,105], [51,53,84], [169,186,181], [216,69,148], [236,196,89]],
    [[105,210,231], [167,219,216], [224,228,204], [243,134,48], [250,105,0]],
    [[122,106,83], [148,140,117], [153,178,183], [213,222,217], [217,206,178]],
    [[34,104,136], [57,142,182], [255,162,0], [255,214,0], [255,245,0]],
    [[2,100,117], [194,163,79], [251,184,41], [254,251,175], [255,229,69]],
    [[214,37,77], [246,215,107], [253,235,169], [255,84,117], [255,144,54]],
    [[0,0,0], [124,180,144], [211,25,0], [255,102,0], [255,242,175]],
    [[35,116,222], [38,38,38], [87,54,255], [231,255,54], [255,54,111]],
    [[64,18,44], [89,186,169], [101,98,115], [216,241,113], [252,255,217]],
    [[126,148,158], [174,194,171], [235,206,160], [252,119,101], [255,51,95]],
    [[75,73,11], [117,116,73], [226,223,154], [235,229,77], [255,0,81]],
    [[159,112,69], [183,98,5], [208,167,124], [253,169,43], [254,238,171]],
    [[38,37,28], [160,232,183], [235,10,68], [242,100,61], [242,167,61]],
    [[0,0,0], [67,110,217], [120,0,0], [216,216,216], [240,24,0]],
    [[51,51,51], [131,163,0], [158,12,57], [226,27,90], [251,255,227]],
    [[79,156,52], [108,186,85], [125,210,89], [158,228,70], [187,255,133]],
    [[0,44,43], [7,100,97], [10,131,127], [255,61,0], [255,188,17]],
    [[149,207,183], [240,65,85], [242,242,111], [255,130,58], [255,247,189]],
    [[89,168,15], [158,213,76], [196,237,104], [226,255,158], [240,242,221]],
    [[54,42,44], [189,223,38], [237,38,105], [238,189,97], [252,84,99]],
    [[11,246,147], [38,137,233], [233,26,157], [246,182,11], [246,242,11]],
    [[8,0,9], [65,242,221], [207,242,65], [249,44,130], [252,241,30]],
    [[198,164,154], [198,229,217], [214,129,137], [233,78,119], [244,234,213]],
    [[6,71,128], [8,84,199], [160,194,222], [205,239,255], [237,237,244]],
    [[93,66,63], [124,87,83], [238,128,117], [255,177,169], [255,233,231]],
    [[59,129,131], [237,48,60], [245,99,74], [250,208,137], [255,156,91]],
    [[56,166,155], [104,191,101], [204,217,106], [242,88,53], [242,218,94]],
    [[60,197,234], [70,70,70], [233,234,60], [246,246,246]],
    [[97,99,130], [102,36,91], [105,165,164], [168,196,162], [229,234,164]],
    [[10,191,188], [19,116,125], [41,34,31], [252,53,76], [252,247,197]],
    [[7,0,4], [236,67,8], [252,129,10], [255,172,35], [255,251,214]],
    [[0,5,1], [8,138,19], [237,20,9], [240,249,241], [247,249,21]],
    [[64,197,132], [131,218,232], [170,46,154], [251,35,137], [251,132,137]],
    [[64,47,58], [217,119,119], [255,198,158], [255,219,196]],
    [[243,96,49], [249,236,95], [255,102,0], [255,153,0], [255,204,0]],
    [[33,90,109], [45,45,41], [60,162,162], [146,199,163], [223,236,230]],
    [[10,42,63], [101,147,160], [185,204,184], [219,21,34], [255,239,167]],
    [[0,160,176], [106,74,60], [204,51,63], [235,104,65], [237,201,81]],
    [[14,141,148], [67,77,83], [114,173,117], [233,213,88], [255,171,7]],
    [[94,159,163], [176,85,116], [220,209,180], [248,126,123], [250,184,127]],
    [[31,31,31], [122,91,62], [205,189,174], [250,75,0], [250,250,250]],
    [[176,230,41], [180,35,16], [247,207,10], [250,124,7], [252,231,13]],
    [[94,65,47], [120,192,168], [240,120,24], [240,168,48], [252,235,182]],
    [[31,26,28], [98,128,125], [134,158,138], [201,107,30], [209,205,178]],
    [[40,60,0], [100,153,125], [237,143,69], [241,169,48], [254,204,109]],
    [[37,2,15], [143,143,143], [158,30,76], [236,236,236], [255,17,104]],
    [[207,108,116], [244,93,120], [255,112,136], [255,130,153], [255,187,193]],
    [[0,0,0], [12,13,5], [168,171,132], [198,201,157], [231,235,176]],
    [[0,170,255], [170,0,255], [170,255,0], [255,0,170], [255,170,0]],
    [[78,150,137], [126,208,214], [135,214,155], [195,255,104], [244,252,232]],
    [[10,10,10], [227,246,255], [255,20,87], [255,216,125]],
    [[51,51,153], [102,153,204], [153,204,255], [255,0,51], [255,204,0]],
    [[23,22,92], [190,191,158], [216,210,153], [229,228,218], [245,224,56]],
    [[49,99,64], [96,158,77], [159,252,88], [195,252,88], [242,252,88]],
    [[92,88,99], [168,81,99], [180,222,193], [207,255,221], [255,31,76]],
    [[61,67,7], [161,253,17], [225,244,56], [244,251,196], [255,208,79]],
    [[0,205,172], [2,170,176], [22,147,165], [127,255,36], [195,255,104]],
    [[0,203,231], [0,218,60], [223,21,26], [244,243,40], [253,134,3]],
    [[34,104,136], [57,142,182], [255,162,0], [255,214,0], [255,245,0]],
    [[3,13,79], [206,236,239], [231,237,234], [251,12,6], [255,197,44]],
    [[253,255,0], [255,0,0], [255,90,0], [255,114,0], [255,167,0]],
    [[108,66,18], [179,0,176], [183,255,55], [255,124,69], [255,234,155]],
    [[0,4,49], [59,69,58], [90,224,151], [204,46,9], [255,253,202]],
    [[59,45,56], [188,189,172], [207,190,39], [240,36,117], [242,116,53]],
    [[101,145,155], [120,185,168], [168,212,148], [242,177,73], [244,229,97]],
    [[0,193,118], [136,193,0], [250,190,40], [255,0,60], [255,138,0]],
    [[110,37,63], [165,199,185], [199,94,106], [241,245,244], [251,236,236]],
    [[39,112,140], [111,191,162], [190,191,149], [227,208,116], [255,180,115]],
    [[62,72,76], [82,91,96], [105,158,81], [131,178,107], [242,232,97]],
    [[248,135,46], [252,88,12], [252,107,10], [253,202,73], [255,169,39]],
    [[83,119,122], [84,36,55], [192,41,66], [217,91,67], [236,208,120]],
    [[41,136,140], [54,19,0], [162,121,15], [188,53,33], [255,208,130]],
    [[10,186,181], [58,203,199], [106,219,216], [153,236,234], [201,252,251]],
    [[8,158,42], [9,42,100], [90,204,191], [229,4,4], [251,235,175]],
    [[187,187,136], [204,198,141], [238,170,136], [238,194,144], [238,221,153]],
    [[121,219,204], [134,78,65], [234,169,167], [242,199,196], [248,245,226]],
    [[96,136,213], [114,170,222], [157,200,233], [192,222,245], [217,239,244]],
    [[30,30,30], [177,255,0], [209,210,212], [242,240,240]],
    [[255,102,0], [255,153,0], [255,204,0], [255,255,204], [255,255,255]],
    [[35,15,43], [130,179,174], [188,227,197], [235,235,188], [242,29,65]],
    [[212,238,94], [225,237,185], [240,242,235], [244,250,210], [255,66,66]],
    [[20,32,71], [168,95,59], [247,92,92], [255,255,255]],
    [[63,184,240], [80,208,240], [196,251,93], [224,240,240], [236,255,224]],
    [[185,222,81], [209,227,137], [224,72,145], [225,183,237], [245,225,226]],
    [[185,222,81], [209,227,137], [224,72,145], [225,183,237], [245,225,226]],
    [[17,68,34], [51,170,170], [51,221,51], [221,238,68], [221,238,187]],
    [[46,13,35], [245,72,40], [247,128,60], [248,228,193], [255,237,191]],
    [[204,243,144], [224,224,90], [247,196,31], [252,147,10], [255,0,61]],
    [[18,18,18], [255,89,56], [255,255,255]],
    [[53,38,48], [85,72,101], [205,91,81], [233,223,204], [243,163,107]],
    [[236,250,1], [236,250,2], [247,220,2], [248,227,113], [250,173,9]],
    [[77,129,121], [161,129,121], [236,85,101], [249,220,159], [254,157,93]],
    [[4,0,4], [65,61,61], [75,0,15], [200,255,0], [250,2,60]],
    [[66,50,56], [179,112,45], [200,209,151], [235,33,56], [245,222,140]],
    [[143,153,36], [172,201,95], [241,57,109], [243,255,235], [253,96,129]],
    [[18,18,18], [23,122,135], [250,245,240], [255,180,143]],
    [[67,197,210], [182,108,97], [241,155,140], [254,247,237], [255,234,215]],
    [[78,205,196], [85,98,112], [196,77,88], [199,244,100], [255,107,107]],
    [[0,0,0], [137,161,160], [154,227,226], [255,71,103], [255,118,5]],
    [[248,200,221], [253,231,120], [255,61,61], [255,92,143], [255,103,65]],
    [[23,138,132], [145,145,145], [229,255,125], [235,143,172], [255,255,255]],
    [[73,112,138], [136,171,194], [202,255,66], [208,224,235], [235,247,248]],
    [[51,222,245], [122,245,51], [245,51,145], [245,161,52], [248,248,101]],
    [[57,13,45], [172,222,178], [225,234,181], [237,173,158], [254,75,116]],
    [[192,107,129], [233,22,67], [245,175,145], [247,201,182], [249,210,182]],
    [[131,196,192], [156,100,53], [190,215,62], [237,66,98], [240,233,226]],
    [[136,145,136], [191,218,223], [207,246,247], [233,26,82], [237,242,210]],
    [[64,44,56], [209,212,169], [227,164,129], [245,215,165], [255,111,121]],
    [[93,65,87], [131,134,137], [168,202,186], [202,215,178], [235,227,170]],
    [[0,168,198], [64,192,203], [143,190,0], [174,226,57], [249,242,231]],
    [[0,204,190], [9,166,163], [157,191,175], [237,235,201], [252,249,216]],
    [[0,205,172], [2,170,176], [22,147,165], [127,255,36], [195,255,104]],
    [[51,39,23], [107,172,191], [157,188,188], [240,240,175], [255,55,15]],
    [[51,51,53], [101,99,106], [139,135,149], [193,190,200], [233,232,238]],
    [[17,118,109], [65,9,54], [164,11,84], [228,111,10], [240,179,0]],
    [[73,10,61], [138,155,15], [189,21,80], [233,127,2], [248,202,0]],
    [[71,162,145], [144,79,135], [213,28,122], [219,213,139], [244,127,143]],
    [[55,191,230], [169,232,250], [186,255,21], [211,255,106], [247,239,236]],
    [[69,173,168], [84,121,128], [89,79,79], [157,224,173], [229,252,194]],
    [[248,241,224], [249,246,241], [250,244,227], [251,106,79], [255,193,150]],
    [[0,98,125], [1,64,87], [51,50,49], [66,153,15], [255,255,255]],
    [[52,17,57], [53,150,104], [60,50,81], [168,212,111], [255,237,144]],
    [[0,153,137], [163,169,72], [206,24,54], [237,185,46], [248,89,49]],
    [[26,31,30], [108,189,181], [147,204,198], [200,214,191], [227,223,186]],
    [[165,222,190], [183,234,201], [251,178,163], [252,37,55], [255,215,183]],
    [[26,20,14], [90,142,161], [204,65,65], [255,255,255]],
    [[51,51,51], [111,111,111], [204,204,204], [255,100,0], [255,255,255]],
    [[51,145,148], [167,2,103], [241,12,73], [246,216,107], [251,107,65]],
    [[31,3,51], [31,57,77], [39,130,92], [112,179,112], [171,204,120]],
    [[209,242,165], [239,250,180], [245,105,145], [255,159,128], [255,196,140]],
    [[60,54,79], [109,124,157], [124,144,179], [149,181,194], [185,224,220]],
    [[35,179,218], [153,214,241], [168,153,241], [208,89,218], [248,78,150]],
    [[85,66,54], [96,185,154], [211,206,61], [241,239,165], [247,120,37]],
    [[20,20,20], [177,198,204], [255,239,94], [255,255,255]],
    [[136,238,208], [202,224,129], [239,67,53], [242,205,79], [246,139,54]],
    [[53,38,29], [95,79,69], [151,123,105], [206,173,142], [253,115,26]],
    [[68,66,89], [159,189,166], [219,101,68], [240,145,67], [252,177,71]],
    [[191,208,0], [196,60,39], [233,60,31], [242,83,58], [242,240,235]],
    [[43,43,43], [53,54,52], [230,50,75], [242,227,198], [255,198,165]],
    [[23,20,38], [26,15,12], [207,207,207], [240,240,240], [255,77,148]],
    [[28,1,19], [107,1,3], [163,0,6], [194,26,1], [240,60,2]],
    [[10,10,10], [140,97,70], [214,179,156], [242,76,61], [255,255,255]],
    [[46,13,35], [245,72,40], [247,128,60], [248,228,193], [255,237,191]],
    [[0,62,95], [0,67,132], [22,147,165], [150,207,234], [247,249,114]],
    [[66,29,56], [87,0,69], [190,226,232], [205,255,24], [255,8,90]],
    [[47,59,97], [121,128,146], [187,235,185], [233,236,229], [255,103,89]],
    [[58,17,28], [87,73,81], [131,152,142], [188,222,165], [230,249,188]],
    [[147,193,196], [198,182,204], [242,202,174], [250,12,195], [255,123,15]],
    [[255,3,149], [255,9,3], [255,139,3], [255,216,3], [255,251,3]],
    [[4,0,4], [254,26,138], [254,53,26], [254,143,26], [254,240,26]],
    [[125,173,154], [196,199,169], [249,213,177], [254,126,142], [255,62,97]],
    [[69,38,50], [145,32,77], [226,247,206], [228,132,74], [232,191,86]],
    [[0,0,0], [38,173,228], [77,188,233], [209,231,81], [255,255,255]],
    [[44,87,133], [209,19,47], [235,241,247], [237,214,130]],
    [[92,172,196], [140,209,157], [206,232,121], [252,182,83], [255,82,84]],
    [[58,68,8], [74,88,7], [125,146,22], [157,222,13], [199,237,14]],
    [[22,147,167], [200,207,2], [204,12,57], [230,120,30], [248,252,193]],
    [[59,12,44], [210,255,31], [250,244,224], [255,106,0], [255,195,0]],
    [[44,13,26], [52,158,151], [200,206,19], [222,26,114], [248,245,193]],
    [[28,20,13], [203,232,107], [242,233,225], [255,255,255]],
    [[75,88,191], [161,206,247], [247,255,133], [255,54,134]],
    [[74,95,103], [92,55,75], [204,55,71], [209,92,87], [217,212,168]]
];

 module.exports = ColorPalette;
